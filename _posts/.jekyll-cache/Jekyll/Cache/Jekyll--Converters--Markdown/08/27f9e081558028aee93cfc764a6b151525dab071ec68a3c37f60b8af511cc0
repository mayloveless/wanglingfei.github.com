I"­<p>æœ€è¿‘å†™é¡¹ç›®çš„æ—¶å€™æ€»è¦æ‰¾APIï¼Œä½†æ˜¯å†…éƒ¨çš„æ ¸å¿ƒåŒ…è‚¯å®šåœ¨overapi.comä¸Šæ˜¯æœ¨æœ‰çš„ï¼Œæ‰€ä»¥å†³å®šå†™ä¸€ä¸ªæœ¬åœ°çš„APIæ£€ç´¢ã€‚çœ‹ç€å¾ˆé«˜çº§çš„æ ·å­ï¼Œå…¶å®å¾ˆç®€å•ï¼Œè€Œä¸”å†™å¾—æœ‰ç‚¹å•°å—¦äº†ã€‚</p>

<p>é¦–å…ˆå†³å®šç”¨Node.JSï¼Œæœ¬æ¥è¦ç”¨pythonæˆ–è€…phpï¼Œåæ¥è§‰å¾—è¿˜æ˜¯Nodeç®€å•ç‚¹å„¿ã€‚æœ€åå†™æˆäº†ç½‘ç«™çš„å½¢å¼ï¼Œè¿™å°±æ˜¯å•°å—¦çš„åœ°æ–¹ï¼Œä½†åæ¥æƒ³æƒ³ä¹Ÿæ˜¯æœ¨æœ‰åŠæ³•çš„ã€‚ç”¨ä¸Šäº†expressã€‚</p>

<p>å…·ä½“æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>

<p>address.jsæ˜¯é…ç½®æ–‡ä»¶ï¼Œå†™å¥½äº†é¡¹ç›®åå’Œè·¯å¾„{nameï¼šaddress}</p>

<p>1ã€è®¿é—®127.0.0.1:3000/æ—¶ï¼Œè·³è½¬åˆ°ç¬¬ä¸€ä¸ªé¡¹ç›®ä¸‹ï¼Œè·¯å¾„ä»¥é¡¹ç›®åå‘½åï¼Œå¦‚ï¼š127.0.0.1:3000/Jquery</p>

<p>2ã€å°†è¯¥é¡¹ç›®åœ°å€ï¼ˆæœ¬åœ°ç»å¯¹è·¯å¾„ï¼‰æ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰€æœ‰çš„æ–‡ä»¶åå–åˆ°ï¼Œå¯ä»¥ç”Ÿæˆä¸€æ£µæ ‘ï¼Œä½†è¿™ä¸ªé¡¹ç›®çš„ç›®çš„ä¸åœ¨äºæ­¤ï¼Œåœ¨äºæŠŠæ ‘ä¸­æ‰€ä»¥æ–‡ä»¶éƒ½ç½—åˆ—åœ¨ä¸€ä¸ªé¡µé¢ä¸Šã€‚æ‰€ä»¥éå†å–åˆ°çš„æ–‡ä»¶åéƒ½å­˜åœ¨äº†ä¸€ä¸ªå¤§å¯¹è±¡ä¸­ã€‚</p>

<p>å–æ–‡ä»¶åçš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var getAllFiles = function(root){
    var tree = [];
    var files = fs.readdirSync(root);
    files.forEach(function(file) {
    var pathname = root+ "/" + file;
    var stat = fs.lstatSync(pathname)
    if (stat === undefined) return
     // ä¸æ˜¯æ–‡ä»¶å¤¹å°±æ˜¯æ–‡ä»¶
    //dictä½œä¸ºæœ€ç»ˆç»“æœï¼Œkeyä¸ºæ–‡ä»¶å¤¹åï¼Œå€¼ä¸ºæ–‡ä»¶å
    //å¦‚æœèµ¶ä¸Šç¬¬ä¸€å±‚å°±æœ‰æ–‡ä»¶ï¼Œkeyå°±ç”¨æ–‡ä»¶å
    var pathKey = pathname.split(Path)[1];
     if (!stat.isDirectory()) {
    if(pathKey.split('/'+file)[0] === ''){
        dict[ file ] = file;
    }else{
        dict[ pathKey.split('/'+file)[0] ] = fs.readdirSync(root);
    }

    tree.push( pathKey );
     // é€’å½’è‡ªèº«
      } else {
        var child = {};
        child[ file ] = getAllFiles( pathname );
        tree.push(child);
      }

    });

    return tree;

};
</code></pre></div></div>

<p>3ã€ç½—åˆ—å‡ºæ¥äº†ä¹‹åï¼Œåªæ˜¾ç¤ºjsæ–‡ä»¶ï¼ˆæ ¹æ®æˆ‘çš„éœ€è¦ï¼‰ï¼Œæ–‡ä»¶æ˜¯é“¾æ¥ï¼Œæ–‡ä»¶å¤¹ä¸æ˜¾ç¤ºé“¾æ¥ã€‚</p>

<p>æœ€åå®ƒæ˜¯è¿™ä¸ªæ ·å­çš„ï¼Œurlï¼š127.0.0.1:3000/STK</p>

<p style="text-align:center"><img src="/images/2013/localAPI.jpg" style="max-width:80%" /></p>

<p>æ®è¯´STKçš„å¼€æºçš„ï¼Œæ‰€ä»¥å°±æ”¾è¿™å„¿å§â€¦â€¦</p>

<p>é¡µé¢ç”¨äº†flat UIï¼Œå®ƒæ˜¯Bootstrapçš„åŸºç¡€ä¸Šç”¨äº†ä¸€å±‚æ–°çš„æ ·å¼è€Œå·²ï¼Œå¾ˆå¥½çœ‹ï¼Œç”¨èµ·æ¥åˆæ˜¯ç†Ÿæ‚‰çš„Bootstrapã€‚æˆ‘è®©æ¯ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„é¢œè‰²éƒ½ä¸åŒä½œä¸ºè§†è§‰ä¸Šçš„åŒºåˆ†ï¼Œå¹¶ä¸”é¢œè‰²éƒ½æ˜¯éšæœºåˆ†é…çš„ã€‚</p>

<p>åŒæ—¶ï¼Œæœç´¢æ¡†åŠŸèƒ½æ˜¯ä»overapi.comä¸Šæ‰’ä¸‹æ¥çš„ï¼Œjquery.quicksearchï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯overapi.comä½œè€…åŸåˆ›çš„ï¼Œæ ·å¼è°ƒäº†åŠå¤©ï¼Œä¸»è¦æ˜¯è·ŸåŸç‰ˆé€»è¾‘ä¸åŒï¼Œä¸è¿‡è¿˜æ˜¯å¾ˆå¥½ç”¨çš„ã€‚</p>

<p>4ã€ç‚¹å‡»æ–‡ä»¶ï¼Œå¯ä»¥çœ‹æºä»£ç ï¼Œæ˜¾ç¤ºæ˜¯è¿™ä¸ªæ ·å­çš„ï¼š</p>

<p style="text-align:center"><img src="/images/2013/localAPICode.PNG" style="max-width:80%" /></p>

<p>urlæ˜¯é¡¹ç›®å+$+æ–‡ä»¶è·¯å¾„+$+æ–‡ä»¶åï¼Œä¸ºçš„æ˜¯èƒ½æ‰¾åˆ°æ–‡ä»¶ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var url = req.params.file;
var pathArr = url.split('$');
var relativePath = '';
for(var i=1;i&lt;pathArr.length;i++){
    relativePath +='/'+pathArr[i];
}

var realAddress = address[ pathArr[0] ] + relativePath;
fs.readFile(realAddress,function(err,data){
    if(data === undefined){
        data = "æœ¨æœ‰æ‰¾åˆ°æ–‡ä»¶ï¼Œè·¯å¾„å‡ºé”™å•¦- - #ï¼æœ¬åœ°åœ°å€ï¼š"+realAddress;
    }

res.render('read', { 
    curPath:pathArr[0],
          file:data,
          allPath : address
    });

});
</code></pre></div></div>

<p>æœ€åä»£ç è¯­æ³•é«˜äº®çš„éƒ¨åˆ†æ˜¯ç”¨å¾—è°·æ­Œçš„prettify.js,å¥½å¼ºå¤§çš„æ ·å­ï¼Œè¯­æ³•é«˜äº®è¦ç”¨è¯æ³•åˆ†æï¼Œç¼–è¯‘åŸç†çš„çŸ¥è¯†ï¼Œå¤©ä¹¦çš„èŠ‚å¥ï¼Œæ‰€ä»¥æ”¾å¼ƒçœ‹æºç äº†ã€‚ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//read.ejs

&lt;link rel='stylesheet' href='/stylesheets/prettify.css' /&gt;
&lt;script src="/javascripts/prettify.js"&gt;&lt;/script&gt;
&lt;pre class="prettyprint" style="background:#fff;margin-left:40px;"&gt; &lt;%= file%&gt;&lt;/pre&gt; 
&lt;script&gt;prettyPrint();&lt;/script&gt; 
</code></pre></div></div>

<p>5ã€æœ€åå°±æ˜¯å¢åŠ åˆ é™¤é¡¹ç›®äº†ï¼Œæ™®é€šçš„ajaxæ“ä½œã€‚</p>

<p style="text-align:center"><img src="/images/2013/localAPIDelete.jpg" style="max-width:60%" /></p>

<p>6ã€æ€»ç»“ä¸€ä¸‹ï¼Œè¿™ä¸ªé¡¹ç›®å†æ—¶8ã€9ä¸ªå°æ—¶å§ï¼Œç”¨äº†2ä¸ªå·¥ä½œæ—¥çš„ä¸‹åˆã€‚</p>

<p>èµ¶è„šç€æŒºå¼±çš„ï¼Œä½¿ç”¨ä¸Šä¹Ÿä¸æ–¹ä¾¿ï¼Œè¿˜è¦å¼€ç€ä¸€ä¸ªcmdï¼Œä½†å³ä½¿å†™æˆphpçš„ï¼Œä¹Ÿå¾—æ˜¯ä¸ªwebç«™ç‚¹ï¼Œæ‰€ä»¥ä¾æ—§éº»çƒ¦ã€‚æœ¬æ¥æƒ³åšæˆchromeæ’ä»¶ï¼Œä½†ä¾æ—§å¾—è¿è¡Œæ‰èƒ½ç”¨ï¼Œä¸èƒ½æŒ‚ç½‘ä¸Šï¼Œè¿˜æ˜¯éº»çƒ¦ï¼Œæ€»ä¹‹ï¼Œæˆ‘ç”¨äº†100å¤šè¡Œä»£ç è§£å†³ä¸€ä¸ªéº»çƒ¦çš„é—®é¢˜æ¢æ¥äº†å¦ä¸€ä¸ªéº»çƒ¦çš„é—®é¢˜ã€‚soï¼Œä¹Ÿå°±è‡ªå·±å‡‘åˆç€ç”¨ç”¨å§â€¦â€¦</p>

<p>é¡¹ç›®ä¸Šä¼ åˆ°äº†githubï¼Œè¯æ˜è‡ªå·±æ›¾ç»æ¥è¿‡â€¦â€¦</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://github.com/wanglingfei/localAPI
</code></pre></div></div>

<p>7ã€è‡³äºcmdçª—å£æ€»å¼€ç€è¿™ä¸ªé—®é¢˜è²Œä¼¼è§£å†³äº†ï¼Œæœ‰å¾…éªŒè¯</p>

<p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Set ws = CreateObject("Wscript.Shell")
ws.run "cmd /c supervisor E:\Mine\localAPI\trunk\app.js ",vbhide
</code></pre></div></div>

<p>ä¿å­˜ä¸ºvbsæ–‡ä»¶ã€‚æ˜¯ä¸ªè„šæœ¬ï¼Œæ‰€ä»¥åŒå‡»å°±å¯åŠ¨äº†ï¼Œç›¸å½“äºåœ¨åå°è¿è¡Œäº†ï¼Œå¾ˆcool~</p>

<p>the end</p>
:ET